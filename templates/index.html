{% extends "layout.html" %}
{% block content %}

<!-- üìä BTC Summary Section
          <div class="">
            <p class="text-sm uppercase text-gray-400 mt-4">BTC Summary</p>
            <ul>
              <li class="block hover:text-green-400">Volatility (7D): {{ summary.volatility }}</li>
              <li class="block hover:text-green-400">Sharpe Ratio: {{ summary.sharpe }}</li>
              <li class="block hover:text-green-400">Latest Return (%): {{ summary.return }}%</li>
              <li class="block hover:text-green-400">Volume: {{ "{:,}".format(summary.volume) }}</li>
              <li class="block hover:text-green-400">Trend (1m/5m/15m): {{ summary.trend_1m }}, {{ summary.trend_5m }}, {{ summary.trend_15m }}</li>
              <li class="block hover:text-green-400">RSI (14d): {{ summary.rsi }}</li>
              <li class="block hover:text-green-400">MACD: {{ summary.macd }} | <strong>Signal:</strong> {{ summary.macd_signal }}</li>
            </ul>
          </div> -->
  <!-- <marquee scrollamount="8" class="text-sm text-green-300 pt-2">
    <p class="text-white">{{ news_marquee_text }}</p>
  </marquee> -->

  <marquee scrollamount="8" class="text-sm text-yellow-400 pb-2">
    <span class="gap-2">
      <!-- <p>  
        XAUUSD:  &nbsp;&nbsp;  BTCUSD &nbsp;&nbsp;  ETHUSD &nbsp;&nbsp;  SOL &nbsp;&nbsp;  LTCUSD &nbsp;&nbsp;  PEPE &nbsp;&nbsp;  DOGE &nbsp;&nbsp;  BNB &nbsp;&nbsp;  EURJPY &nbsp;&nbsp;  EURUSD
      </p> -->
      <p class="text-white">{{ticker_text}}</p>
    </span>
  </marquee>

<!-- ‚úÖ TradingView Advanced Chart Widget -->
{% if symbol %}
<div class="section">
  <div class="tradingview-widget-container" style="height:600px; width:100%">
    <div id="tv_chart_container" style="height:100%; width:100%"></div>
  </div>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
    new TradingView.widget({
      autosize: true,
      symbol: "BINANCE:BTCUSD",
      interval: "5",
      timezone: "Etc/UTC",
      theme: "dark",
      style: "1",
      locale: "en",
      container_id: "tv_chart_container",
      "backgroundColor": "rgba(1, 1, 1, 1)",
      "gridColor": "rgba(100, 255, 218, 0.05)",
      enable_publishing: false,
      allow_symbol_change: true,
      hide_side_toolbar: false,
      withdateranges: true,
      details: true,
      hotlist: false,
      calendar: true
    });
  </script>
</div>
{% else %}
<h2>üìà No symbol selected</h2>
{% endif %}

<!-- ‚ö†Ô∏è Error Section -->
{% if error %}
<div class="section">
  <p style="color: red; font-weight: bold;">‚ö†Ô∏è {{ error }}</p>
</div>
{% endif %}

<!-- üìà Price Chart Section -->
<div class="section">
  <div class="tradingview-widget-container" style="height:600px; width:100%">
    <div id="tv_chart_container_2" style="height:100%; width:100%"></div>
  </div>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
    new TradingView.widget({
      "autosize": true,
      "symbol": "BINANCE:BTCUSD",
      "interval": "5",
      "timezone": "America/New_York",
      "theme": "dark",
      "style": "2",
      "locale": "en",
      "allow_symbol_change": true,
      "backgroundColor": "rgba(1, 1, 1, 1)",
      "gridColor": "rgba(100, 255, 218, 0.05)",
      "save_image": true,
      "calendar": false,
      "details": false,
      "hide_side_toolbar": true,
      "hide_top_toolbar": false,
      "hide_legend": false,
      "hide_volume": false,
      "hotlist": false,
      "withdateranges": false,
      "compareSymbols": [],
      "studies": [
        "STD;Stochastic_RSI",
        "STD;MACD"
      ],
      "container_id": "tv_chart_container_2"
    });
  </script>
</div>
<!-- TradingView Widget END -->

{% endblock %}
